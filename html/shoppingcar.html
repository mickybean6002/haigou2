<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>快来清空购物车买买买吧</title>
<link rel="stylesheet" type="text/css" href="../css/public.css">
<link rel="stylesheet" type="text/css" href="../css/shoppingcar.css">
<script type="text/javascript" src="../js/jquery-1.8.3.min.js"></script>
</head>

<body>
<div id="top">
       <div id="box1">
            <div class="w">
                <p class="l">Hi，欢迎来到洋码头</p>
                <ul class="r">
                    <li class="l"><a href="#">购物车</a></li>
                    <li class="l"><a href="#">我的订单</a></li>
                    <li class="l"><a href="#">个人中心</a></li>
                    <li class="l"><a href="#">手机洋码头</a></li>
                </ul>
            </div>
        </div>
        <div class="w">
            <div id="box2">
            	<h1 class="l"><a href="../index.html"></a><span>购物车</span></h1>
                <ul class="r">
                	<li class="l"><span>1</span>我的购物车<i></i></li>
                	<li class="l"><span>2</span>提交订单<i></i></li>
                	<li class="l"><span>3</span>选择支付方式</li>
                </ul>
            </div>
            <div id="box3">
            	<span>全部商品</span>
            </div>
            <p id="p4">海外买手会根据现行国家政策要求，通过不同的物流方式分别发货，其实对你没有影响啦~</p>
            <div id="box5">
            	<span><input type="checkbox"/>全选</span>
            	<span>商品信息</span>
            	<span>单价（元）</span>
            	<span>数量</span>
            	<span>金额（元）</span>
            	<span>操作</span>
            </div>
        </div>
</div>
<div >
	<div class="w" id="goodscart">
		<!--<div class="demo">
			<div class="tips">
				<input type="checkbox"/><a href="#"><img src="../images/CgvUA1eHhNWAb104AABfoHhtyNE159_m.jpg"/>假一赔万</a><a href="#"><img src="../images/Canada.png"/>加拿大</a>
			</div>
			<ul>
				<li>
					<input type="checkbox" class="l"/>
					<img src="../images/000.jpg"/>
					<div class="detail">
						<p><span>包邮包税</span>ALDO信封包 单肩 斜挎 链条 24*17*8 加拿大本土品牌 招全球代理</p>
						<p><span>第三方直邮</span><span>本土退货</span></p>
					</div>
					<span class="value">368.00</span>
					<div class="moreless">
						<input type="button" value="+" class="inleft l"/>
						<input type="text" value="3" class="inmiddle l"/>
						<input type="button" value="-" class="inright l"/>
					</div>
					<i>1104.00</i>
					<b>删除</b>
				</li>
			</ul>
		</div>-->
	</div>
</div>

<div id="bottom">
	<input type="checkbox"/>
	<span>全选</span>
	<span>删除选中商品</span>
	<span>删除全部失效商品</span>
	<span>已选<i>0</i>件商品，总价</span>
	<b id="account">￥1980.00</b>
	<em class="r">结算</em>
</div>

<div id="footer">
    	<div class="one">
        	<div class="w">
				<a href="#"><img src="../images/footer_hengtiao.png"/></a>
            </div>
        </div>
    	<div class="two w">
        	<ul class="ul1 l">
            	<li class="first">购物指南</li>
            	<li><a href="#">注册与登录</a></li>
            	<li><a href="#">账户信息维护</a></li>
            	<li><a href="#">购物流程</a></li>
            	<li><a href="#">会员体系</a></li>
            	<li><a href="#">常见问题</a></li>
            </ul>
        	<ul class="ul2 l">
            	<li class="first">订单服务</li>
            	<li><a href="#">订单状态说明</a></li>
            	<li><a href="#">自动取消订单</a></li>
            	<li><a href="#">上传身份证</a></li>
            </ul>
        	<ul class="ul3 l">
            	<li class="first">支付与配送</li>
            	<li><a href="#">支付方式</a></li>
            	<li><a href="#">优惠券和红包</a></li>
            	<li><a href="#">如何提现</a></li>
            	<li><a href="#">配送方式</a></li>
            </ul>
        	<ul class="ul4 l">
            	<li class="first">售后服务</li>
            	<li><a href="#">消费维权</a></li>
            	<li><a href="#">纠纷处理规则</a></li>
            	<li><a href="#">退货规则</a></li>
            </ul>
            <ul class="ul5 l">
            	<li class="first">官方微信</li>
				<li class="middle"><img src="../images/weixin2d-new.png"/></li>
                <li class="last"><a href="#">关注微博<span class="r"></span></a></li>
            </ul>
        </div>
        <div class="three">
        	<a href="#" class="l">关于码头</a>
        	<a href="#" class="l">码头招聘</a>
        	<a href="#" class="l">网站地图</a>
        	<a href="#" class="l">所有帮助</a>
        	<a href="#" class="l">海外招商中心</a>
        	<a href="#" class="l">扫货买手规则</a>
        	<a href="#" class="l">卖家常见问题</a>
        </div>
        <div class="four">
        	<a href="#">55bbs我爱购物网</a>
        	<a href="#">篱笆网</a>
        	<a href="#">闺蜜网</a>
        	<a href="#">名品导购网</a>
        	<a href="#">瑞丽女性网</a>
        	<a href="#">起点中文网</a>
        	<a href="#">起点女生网</a>
        	<a href="#">酷6网</a>
        	<a href="#">太平洋返利网</a>
        	<a href="#">海外折扣拼团</a>
        	<a href="#">韩都衣舍</a>
        	<a href="#">嘉年乐</a>
        	<a href="#">为为网购商城</a>
        	<a href="#">同城购物网</a>
        	<a href="#">齐家网</a>
        	<a href="#">网上商城</a>
        	<a href="#">礼品公司</a>
        	<a href="#">留学服务中心</a>
        	<a href="#">礼派</a>
        	<a href="#">快易拍</a>
        	<a href="#">手表</a>
        	<a href="#">卡当创意礼物</a>
        	<a href="#">户外装备</a>
        	<a href="#">母婴展</a>
        	<a href="#">微财富理财</a>
        	<a href="#">更多>></a>
        </div>
        <div class="five">
        	<a href="#"><img src="../images/xin.png"/></a>
        	<a href="#"><img src="../images/xin1.png"/></a>
        	<a href="#"><img src="../images/xin2.png"/></a>
        	<a href="#"><img src="../images/xin3.png"/></a>
        	<a href="#"><img src="../images/xin4.png"/></a>
        </div>
        <div class="six">
        	<p>&copy;2009－2018 ymatou.com, All rights reserved 增值电信业务经营许可证：沪B2-20140021 17</p>
            <p>上海洋码头网络技术有限公司 版权所有 备案号（ 沪ICP备11050082号 ）</p>
			<p>上海市灵石路695号3号楼1404室</p>
        	<div>
            	<img src="../images/shanghai.png"/>
                <img src="../images/gongan.png"/>
            </div>
        </div>
</div>
<div id="rightbar">
	<ul>
    	<li class="one"><a href="#"></a></li>
    	<li class="two"><a href="#">购物车</a></li>
    	<li class="three"><span>
        	<img src="../images/CgvUBFht9-CADvH8AAAW6VtgvkI439_62_63_w_o.png"/>
            <p>下载APP领取260元新人礼包</p>
        </span></li>
    	<li class="four"><a href="javascript:;" id="returnTop">TOP</a></li>
    </ul>
</div>
</body>
<script>
	var strStoreDate = window.localStorage?localStorage.getItem("userName"): Cookie.read("userName");
	$(function(){
		
		$.ajax({
				url:"../php/getShoppingCart.php",
				async:true,
				data:"vipName="+strStoreDate,
				type:"get",
				dataType:"json",
				success:function(data){
					let obj=data;
					for(var i=0;i<data.length;i++){
						let goodsId=obj[i].goodsId;
						let goodsImg=obj[i].goodsImg;
						let goodsName=obj[i].goodsName;
						let goodsPrice=obj[i].goodsPrice;
						let goodsType=obj[i].goodsType;
						let beiyong1=obj[i].beiyong1;
						let beiyong2=obj[i].beiyong2;
						let goodsCount=obj[i].goodsCount;
						let str="<div class='demo'><div class='tips'><input type='checkbox'/><a href='#'><img src='../images/CgvUA1eHhNWAb104AABfoHhtyNE159_m.jpg'/>"+beiyong1+"</a><a href='#'><img src='../images/Canada.png'/>"+beiyong2+"</a></div><ul><li><input type='checkbox' class='l'/><img src='"+goodsImg+"'/><div class='detail'><p><span>"+goodsType+"</span>"+goodsName+"</p><p><span>第三方直邮</span><span>本土退货</span></p></div><span class='value'>"+goodsPrice+"</span><div class='moreless'><input type='button' value='+' class='inleft l'/><input type='text' value='"+goodsCount+"' class='inmiddle l'/><input type='button' value='-' class='inright l'/></div><i>"+goodsPrice*goodsCount+"</i><b onclick='deleteTarget("+goodsId+")'>删除</b></li></ul></div>";
						console.log(str);
						$("#goodscart").append(str);
					
				}	
		$(".moreless input:nth-child(1)").click(function(){	
			$(this).next().val(parseInt($(this).next().val())+1);
			$(this).parent().next().html($(this).next().val()*$(this).parent().prev().html());
			allPrice();
		})
		
		$(".moreless input:nth-child(3)").click(function(){	
			$(this).prev().val($(this).prev().val()-1);
			if($(this).prev().val()<=0){
				$(this).prev().val(0);
				allPrice();
			}
	$(this).parent().next().html($(this).prev().val()*$(this).parent().prev().html());
	
	
		})
			allPrice();
		}
		
	});//ajax
	
})
	
		function deleteTarget(goodsId){
			$.ajax({
				url:"../php/deleteGoods.php",
				async:true,
				data:"goodsId="+goodsId+"&vipName="+strStoreDate,
				type:"get",
				success:function(data){
					if(data==1){
						alert("删除成功");
					}else{
						alert("删除失败");
					}
				}		
			});
			location=location;
		}
		
		//有问题 待修正
		function allPrice(){
			let account=0;
			for(let i=0;i<$(".inright").length;i++){
				 account+=parseInt($(".inright")[i].innerHTML);
			}
			$("#account").html(account);
		}

</script>
</html>




































